# Raptor Traffic Recording Configuration
# Service: demo-service
# Generated by TARS - Test Automation and Review System

# Service configuration
service:
  name: demo-service
  version: "1.0.0"
  
# Recording settings
recording:
  # Enable/disable recording
  enabled: true
  
  # Recording mode: proxy | sidecar | agent
  mode: proxy
  
  # Target service endpoint
  target:
    host: localhost
    port: 8080
    protocol: http
    
  # Proxy configuration (when mode: proxy)
  proxy:
    listenPort: 9080
    
  # What to record
  capture:
    requests: true
    responses: true
    headers: true
    body: true
    timing: true
    
  # Request matching
  match:
    # Include patterns (regex)
    include:
      - "^/api/.*"
      - "^/v[0-9]+/.*"
    # Exclude patterns (regex)
    exclude:
      - "^/health.*"
      - "^/metrics.*"
      - "^/actuator.*"
      - "^/swagger.*"
      - "^/favicon.ico"
      
  # Body size limits
  limits:
    maxBodySize: 1048576  # 1MB
    maxRecordingSize: 104857600  # 100MB
    
# Storage configuration
storage:
  # Storage type: file | s3 | gcs
  type: file
  
  # File storage settings
  file:
    directory: ./raptor/recordings
    format: json  # json | har
    compression: gzip
    
# Filters configuration
filters:
  # Filter config files
  files:
    - ./raptor/filters/default-filters.yml
    - ./raptor/filters/sensitive-data.yml
    
# Metadata to include in recordings
metadata:
  environment: ${ENVIRONMENT:-local}
  buildNumber: ${BUILD_NUMBER:-dev}
  gitCommit: ${GIT_COMMIT:-unknown}
  
# Logging
logging:
  level: info
  format: json
